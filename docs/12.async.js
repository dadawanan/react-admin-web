(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"8aoI":function(e,a,t){"use strict";var l=t("oWcC"),r=t("eVuz");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("+L6B");var i=l(t("2/Rp"));t("7Kak");var s=l(t("9yH6"));t("5NDa");var n=l(t("5rEg")),u=l(t("CAYl")),d=l(t("18bz"));t("miYZ");var o=l(t("tsqr")),m=l(t("UpVr"));t("y8nQ");var f,p,c,v,g=l(t("Vl3Y")),h=r(t("q1tI")),b=t("WXbf"),E=t("LLXN"),x=l(t("uBsN")),w=t("Yfch"),M=g.default.Item,_=(f=(0,b.connect)(e=>{var a=e.app;return{currentUser:a.currentUser}}),p=g.default.create(),f(c=p((v=class extends h.PureComponent{constructor(){var e;e=super(...arguments),this.handleSubmit=(a=>{a.preventDefault(),this.props.form.validateFields(function(){var a=(0,m.default)(d.default.mark(function a(t,l){var r,i,s,n;return d.default.wrap(function(a){while(1)switch(a.prev=a.next){case 0:if(t){a.next=8;break}return r=l.avatar_file[0],i=r?r.code:"",l.avatar_file=r,s=Object.assign(e.props.currentUser,l,{avatar:i}),n=e.props.dispatch,a.next=8,n({type:"app/updateCurrentUser",payload:s,callback:()=>{o.default.success((0,E.formatMessage)({id:"msg.saved"}))}});case 8:case"end":return a.stop()}},a,this)}));return function(e,t){return a.apply(this,arguments)}}())})}render(){var e=this.props.form.getFieldDecorator,a=this.props.currentUser,t={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};return h.default.createElement("div",{style:{width:"600px"}},h.default.createElement("h2",null,h.default.createElement(E.FormattedMessage,{id:"menu.setting.base"})),h.default.createElement(g.default,{onSubmit:this.handleSubmit},h.default.createElement(M,(0,u.default)({},t,{label:(0,E.formatMessage)({id:"label.avatar"})}),e("avatar_file",{valuePropName:"fileList",initialValue:a.avatar_file?[a.avatar_file]:[]})(h.default.createElement(x.default,{maxLimit:1,data:{is_static:!0,folder_name:"avatar",is_thumb:!0}}))),h.default.createElement(M,(0,u.default)({},t,{label:(0,E.formatMessage)({id:"label.name-cn"})}),e("name_cn",{initialValue:a.name_cn,rules:[{required:!0,whitespace:!1,message:(0,E.formatMessage)({id:"validation.name-cn.required"})},{max:50,min:1,pattern:w.regNameCn,message:(0,E.formatMessage)({id:"validation.name-cn"})}]})(h.default.createElement(n.default,null))),h.default.createElement(M,(0,u.default)({},t,{label:(0,E.formatMessage)({id:"label.name-en"})}),e("name_en",{initialValue:a.name_en,rules:[{whitespace:!0,message:(0,E.formatMessage)({id:"validation.name-en.required"})},{max:50,min:1,pattern:w.regNameEn,message:(0,E.formatMessage)({id:"validation.name-en"})}]})(h.default.createElement(n.default,null))),h.default.createElement(M,(0,u.default)({},t,{label:(0,E.formatMessage)({id:"label.sex"})}),e("sex",{initialValue:a.sex,rules:[{required:!0}]})(h.default.createElement(s.default.Group,null,h.default.createElement(s.default,{value:1},h.default.createElement(E.FormattedMessage,{id:"label.sex.male"})),h.default.createElement(s.default,{value:2},h.default.createElement(E.FormattedMessage,{id:"label.sex.female"}))))),h.default.createElement(M,(0,u.default)({},t,{label:(0,E.formatMessage)({id:"label.mobile"})}),e("mobile",{initialValue:a.mobile,rules:[{required:!0,message:(0,E.formatMessage)({id:"validation.mobile.required"})},{pattern:w.regPhone,message:(0,E.formatMessage)({id:"validation.mobile"})}]})(h.default.createElement(n.default,null))),h.default.createElement(M,(0,u.default)({},t,{label:(0,E.formatMessage)({id:"label.email"})}),e("mail",{initialValue:a.mail,rules:[{type:"email",message:(0,E.formatMessage)({id:"validation.email"})}]})(h.default.createElement(n.default,null))),h.default.createElement(g.default.Item,{wrapperCol:{span:12,offset:6},style:{textAlign:"center"}},h.default.createElement(i.default,{type:"primary",htmlType:"submit"},h.default.createElement(E.FormattedMessage,{id:"button.save"})))))}},c=v))||c)||c),L=_;a.default=L},Yfch:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.regTitle=a.regCode=a.regName=a.regPassword=a.regNameEn=a.regNameCn=a.regAccount=a.regPhone=void 0;var l=/^1[34578]\d{9}$/;a.regPhone=l;var r=/^[a-zA-Z0-9@._]{1,50}$/;a.regAccount=r;var i=/^[\u4e00-\u9fa5a-zA-Z. ]{1,50}$/;a.regNameCn=i;var s=/^[a-zA-Z. ]{1,50}$/;a.regNameEn=s;var n=/^[^\s]{4,50}$/;a.regPassword=n;var u=/^[\u4e00-\u9fa5a-zA-Z0-9. ]{1,50}$/;a.regName=u;var d=/^[a-zA-Z_0-9]{1,50}$/;a.regCode=d;var o=/^[\u4e00-\u9fa5\S]{1,50}$/;a.regTitle=o},uBsN:function(e,a,t){"use strict";var l=t("eVuz"),r=t("oWcC");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("DZo9");var i=r(t("8z0m"));t("Pwec");var s=r(t("CtXQ"));t("miYZ");var n=r(t("tsqr")),u=l(t("q1tI")),d=(r(t("17x9")),r(t("ExhV"))),o=r(t("DlBl"));t("yP6L");var m=t("LLXN"),f=["image/jpeg","image/jpg","image/png","image/gif"];class p extends u.PureComponent{constructor(e){super(e),this.beforeUpload=((e,a)=>{var t=this.props.maxLimit,l=!0;if(t>0){var r=this.state.fileList.length+a.length;r>t&&(n.default.error((0,m.formatMessage)({id:"upload.validation.limit-number"})),l=!1)}var i=f.some(a=>a==e.type);i||n.default.error((0,m.formatMessage)({id:"upload.validation.limit-image-type"}));var s=e.size/1024/1024<5;return s||n.default.error((0,m.formatMessage)({id:"upload.validation.limit-size"})),i&&s&&l}),this.handleChange=(e=>{var a=e.file,t=e.fileList,l=this.props.onChange;if("done"==a.status){var r=a.response;r.code&&n.default.error(r.message)}t=t.map(e=>{if(e.response){if(0==e.response.code){var a=e.response.data,t=a.code,l=a.url,r=a.thumb_url;return{uid:e.uid,code:t,name:e.name,size:e.size,type:e.type,url:l,src:l,status:"done",thumbUrl:r}}e.status="error"}return e}),t=t.filter(e=>{return"done"==e.status||"uploading"==e.status}),this.setState({fileList:t}),"done"==a.status&&l(t)}),this.handlePreview=(e=>{var a=0;1!=this.props.maxLimit&&this.state.fileList.forEach((t,l)=>{t.uid==e.uid&&(a=l)}),this.setState({viewVisible:!0,viewIndex:a})}),this.handleRemove=(e=>{var a=this.props.onChange,t=this.state.fileList.filter(a=>{return a.uid!==e.uid});a(t)});var a=e.fileList||[];this.state={fileList:a,viewVisible:!1,viewIndex:0}}render(){var e=this.props,a=e.data,t=e.uploadText,l=e.maxLimit,r=e.multiple,n=u.default.createElement("div",null,u.default.createElement(s.default,{type:"plus"}),u.default.createElement("div",{className:"ant-upload-text"},t));return u.default.createElement("div",null,u.default.createElement(i.default,{name:"file",multiple:r,data:a,listType:"picture-card",showUploadList:!0,action:d.default.api_url+"/core/file/upload",beforeUpload:this.beforeUpload,onChange:this.handleChange,headers:{token:localStorage.getItem("token")},fileList:this.state.fileList,onRemove:this.handleRemove,onPreview:this.handlePreview},this.state.fileList.length>=l&&0!=l?null:n),u.default.createElement(o.default,{images:this.state.fileList,onClose:()=>{this.setState({viewVisible:!1})},activeIndex:this.state.viewIndex,visible:this.state.viewVisible}))}}p.defaultProps={uploadText:(0,m.formatMessage)({id:"label.upload"}),data:{folder_name:"",is_static:!0,is_thumb:!0},multiple:!1,maxLimit:0};var c=p;a.default=c}}]);